<html><head><title>GameDev.net -- Cel-Shading</title>

  







<meta name="Keywords" content="game development, game programming, game jobs, video game jobs, games jobs, graphics programming, OpenGL, DirectX, Direct3D, AI, artificial intelligence, game design, game, gamedev, development, programming, c++, games, program, create, design, gouraud, shading, tutorial, art, gdnet">
<meta name="Description" content="Gamedev.net is the leading resource for game developers, featuring daily news updates, over 1500 featured articles and tutorials, and the most active game development forums anywhere!"> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">

<link rel="stylesheet" type="text/css" href="GameDev.net%20--%20Cel-Shading_files/theme.css">

<link rel="stylesheet" type="text/css" href="GameDev.net%20--%20Cel-Shading_files/source.css">
<link rel="alternate" type="application/rss+xml" title="GameDev.net Feed" href="http://www.gamedev.net/xml">
	
<script type="text/javascript" src="GameDev.net%20--%20Cel-Shading_files/menu.js"></script>

<style type="text/css">
.iTt{
    FONT-FAMILY:       Verdana, Arial, Helvetica;
    FONT-SIZE:         11px;
    FONT-STYLE:        normal;
    FONT-WEIGHT:       normal;
    COLOR:             black;
    BACKGROUND-COLOR:  lightyellow;
    BORDER:            black 1px solid;
    PADDING:           2px;
}
.iTt a {
    COLOR:             0000CC;
}
.iTt a:visited {
    COLOR:             0000CC;
}
.iTt a:hover {
    COLOR:             6666CC;
}
.iTt TD {
   COLOR:              999999;
}
</style></head><body>

<div id="header"><!-- style="width: 800px">-->
<!--<div class="hdrtoplinks">
<a href="">advertise</a> | <a href="">write</a> | <a href="">about us</a>&nbsp;&nbsp;</span>
</div>-->
<table style="table-layout: fixed;" border="0" cellpadding="0" cellspacing="0" width="100%">
	<tbody><tr valign="top">
		<td id="CM_Logo" rowspan="4"><a href="http://www.gamedev.net/"><img src="GameDev.net%20--%20Cel-Shading_files/clear.gif" alt="" border="0" height="100%" width="100%"></a></td>
		<td id="CM_AdSpace">
			<div id="CM_AdContainer">
			
<!-- Begin -  Site: GameDev.net Zone: GameDev.net Main 468x60 -->
<script language="javascript" type="text/javascript">
<!--
var browName = navigator.appName;
var SiteID = 1;
var browDateTime = (new Date()).getTime();
if (browName=='Netscape')
{
document.write('<s'+'cript lang' + 'uage="jav' + 'ascript" src="http://www.gamedev.net/banman/a.aspx?ZoneID=1&amp;Task=Get&amp;IFR=False&amp;Browser=NETSCAPE4&amp;PageID=15898&amp;SiteID=' + SiteID + '&amp;Random=' + browDateTime + '">'); document.write('</'+'scr'+'ipt>');
}
if (browName!='Netscape')
{
document.write('<s'+'cript lang' + 'uage="jav' + 'ascript" src="http://www.gamedev.net/banman/a.aspx?ZoneID=1&amp;Task=Get&amp;IFR=False&amp;PageID=15898&amp;SiteID=' + SiteID + '&amp;Random=' + browDateTime + '">'); document.write('</'+'scr'+'ipt>');
}
// --> 
</script><script language="javascript" src="GameDev.net%20--%20Cel-Shading_files/a.js"></script><script type="text/javascript"><!--
google_ad_client = "pub-3167291168602081";
google_alternate_ad_url = "http://www.gamedev.net/banman/banman.asp?ZoneID=20&Task=Get";
google_ad_width = 468;
google_ad_height = 60;
google_ad_format = "468x60_as";
google_ad_type = "text_image";
google_ad_channel ="";
google_color_border = "336699";
google_color_bg = "FFFFFF";
google_color_link = "0000FF";
google_color_url = "008000";
google_color_text = "000000";
//--></script>
<script type="text/javascript" src="GameDev.net%20--%20Cel-Shading_files/show_ads.js">
</script><iframe name="google_ads_frame" src="GameDev.net%20--%20Cel-Shading_files/ads.htm" marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" frameborder="0" height="60" scrolling="no" width="468"></iframe>
<noscript> <a
href="http://www.gamedev.net/banman/a.aspx?ZoneID=1&amp;Task=Click&amp;Mode=HTML&amp;SiteID=1&amp;PageID=39662"
target="_blank"> <img
src="http://www.gamedev.net/banman/a.aspx?ZoneID=1&amp;Task=Get&amp;Mode=HTML&amp;SiteID=1&amp;PageID=39662"
width="468" height="60" border="0" alt=""></a>
</noscript>
<!-- End -  Site: GameDev.net Zone: GameDev.net Main 468x60 -->
			</div>
		</td>
		<td id="CM_AdSpaceTrailer"><img src="GameDev.net%20--%20Cel-Shading_files/clear.gif" alt="" height="100%" width="100%"></td>
	</tr>
	<tr>
		<td id="CM_MidSpace"><img src="GameDev.net%20--%20Cel-Shading_files/clear.gif" alt="" height="100%" width="100%"></td>
		<td id="CM_MidSpaceTrailer"><img src="GameDev.net%20--%20Cel-Shading_files/clear.gif" alt="" height="100%" width="100%"></td>
	</tr>
	<tr>
		<td id="CM_NavSpace">
			<ul id="lw_menu">
				<li style="width: 0pt;">&nbsp;</li>
				<li id="l1f">Features
					<ul>
						<li id="l2fa"><img src="GameDev.net%20--%20Cel-Shading_files/jobs.gif" align="middle"> <a href="http://www.gamedev.net/gamejobs/">Game Jobs</a></li>
						<li id="l2fb"><img src="GameDev.net%20--%20Cel-Shading_files/prodreview.gif" align="middle"> <a href="http://www.gamedev.net/features/reviews/">Product Reviews</a></li>
						<li id="l2fc"><img src="GameDev.net%20--%20Cel-Shading_files/users.gif" align="middle"> <a href="http://www.gamedev.net/community/contest/">Contests</a></li>
			
						<li id="l2fd"><img src="GameDev.net%20--%20Cel-Shading_files/gds.gif" align="middle"> <a href="http://www.gamedev.net/community/gds/">GD Showcase</a></li>
						<li id="l2fe"><img src="GameDev.net%20--%20Cel-Shading_files/newsletter.gif" align="middle"> <a href="http://www.gamedev.net/info/newsletter.asp">Newsletter</a></li>
					</ul>
				</li>
				<li id="l1r">Resources
					<ul>
						<li id="l2ra"><img src="GameDev.net%20--%20Cel-Shading_files/articles.gif" align="middle"> <a href="http://www.gamedev.net/reference/">Articles &amp; Resources</a></li>
			
						<li id="l2rb"><img src="GameDev.net%20--%20Cel-Shading_files/columns.gif" align="middle"> <a href="http://www.gamedev.net/columns/">Columns</a></li>
						<li id="l2rc"><img src="GameDev.net%20--%20Cel-Shading_files/books.gif" align="middle"> <a href="http://www.gamedev.net/columns/books/">Books</a></li>
						<li id="l2rd"><img src="GameDev.net%20--%20Cel-Shading_files/beginners.gif" align="middle"> <a href="http://www.gamedev.net/reference/start_here/">For Beginners</a></li>
						<li id="l2re"><img src="GameDev.net%20--%20Cel-Shading_files/gamedict.gif" align="middle"> <a href="http://www.gamedev.net/dict/">Game Dictionary</a></li>
					</ul>
			
				</li>
				<li id="l1c">Community
					<ul>
						<li id="l2ca"><img src="GameDev.net%20--%20Cel-Shading_files/chat.gif" align="middle"> <a href="http://www.gamedev.net/community/forums/">Forums</a></li>
						<li id="l2cb"><img src="GameDev.net%20--%20Cel-Shading_files/users.gif" align="middle"> <a href="http://www.gamedev.net/community/gathering/">GD Gathering</a></li>
						<li id="l2cc"><img src="GameDev.net%20--%20Cel-Shading_files/ircchat.gif" align="middle"> <a href="http://www.gamedev.net/community/chat/">Online Chat</a></li>
			
					</ul>
				</li>
				<li id="l1m">Members
					<ul>
						<li id="l2ma"><img src="GameDev.net%20--%20Cel-Shading_files/controlpanel.gif" align="middle"> <a href="http://www.gamedev.net/community/forums/cpanel.asp">Control Panel</a></li>
						<li id="l2mb"><img src="GameDev.net%20--%20Cel-Shading_files/new1-08.gif" align="middle"> <a href="http://www.gamedev.net/subscribe/">GDNet+ Signups</a></li>
						<li id="l2mc"><img src="GameDev.net%20--%20Cel-Shading_files/journals.gif" align="middle"> <a href="http://www.gamedev.net/community/journals/">Developer Journals</a></li>
						<li id="l2md"><img src="GameDev.net%20--%20Cel-Shading_files/membersearch.gif" align="middle"> <a href="http://www.gamedev.net/profile/">Member Search</a></li>
					</ul>
				</li>
			</ul>
		
		</td>
		<td id="CM_NavSpaceTrailer"><img src="GameDev.net%20--%20Cel-Shading_files/clear.gif" alt="" height="100%" width="100%"></td>
	</tr>
	<tr>
		<td id="CM_ExOptA"><img src="GameDev.net%20--%20Cel-Shading_files/clear.gif" alt="" height="100%" width="100%"></td>
		<td id="CM_ExOptB"><img src="GameDev.net%20--%20Cel-Shading_files/clear.gif" alt="" height="100%" width="100%"></td>
	</tr>
</tbody></table>
</div>

<script language="Javascript">
	startList();
</script>
<div class="leftcolumn">	
			<div id="CMS_LogoAlt"><a href="http://www.gamedev.net/"><img src="GameDev.net%20--%20Cel-Shading_files/clear.gif" alt="" style="z-index: 10000;" border="0" height="100%" width="100%"></a></div>
			<div id="CMS_ExOptA"></div>
			<div id="CMS_ExOptB"></div>
			<div id="CMS_Options">
				<div id="CMS_Features">
				  <div class="boxContentHeadr_MM">
				  	<div class="boxContentHeadr_Title">Features</div>
				  </div>
				  <img src="GameDev.net%20--%20Cel-Shading_files/int_gdcirc.gif" class="boxCImgR">
				  <img src="GameDev.net%20--%20Cel-Shading_files/int_gdltcr.gif" class="boxCImgL">
				  <div class="boxContent_MM">
			          <a href="http://www.gamedev.net/gamejobs/">Game Jobs</a><br>
			          <a href="http://www.gamedev.net/features/reviews/">Product Reviews</a><br>
			          <a href="http://www.gamedev.net/community/contest/">Contests</a><br>
			          <a href="http://www.gamedev.net/community/gds/">GD Showcase</a><br>
			          <a href="http://www.gamedev.net/info/newsletter.asp">Newsletter</a><br>
			          <a href="http://www.gamedev.net/info/media/">Advertise with Us</a><br>
			          <a href="http://www.gamedev.net/info/about/">About Us</a>
				  </div>
				</div>	
				<br class="CMS_Spacer">
				<div id="CMS_Resources">
				  <div class="boxContentHeadr_MM">
				  	<div class="boxContentHeadr_Title">Resources</div>
				  </div>
				  <img src="GameDev.net%20--%20Cel-Shading_files/int_gdcirc.gif" class="boxCImgR">
				  <img src="GameDev.net%20--%20Cel-Shading_files/int_gdltcr.gif" class="boxCImgL">			  
				  <div class="boxContent_MM">
			          <a href="http://www.gamedev.net/reference/">Articles &amp; Resources</a><br>
			          <a href="http://www.gamedev.net/columns/">Columns</a><br>
			          <a href="http://www.gamedev.net/columns/books/">Books</a><br>
			          <a href="http://www.gamedev.net/reference/start_here/">For Beginners</a><br>
			          <a href="http://www.gamedev.net/dict/">Game Dictionary</a>
			          <a href="http://www.gamedev.net/info/writers.asp">Write For Us</a>
				  </div>
				</div>	
				<br class="CMS_Spacer">
				<div id="CMS_Community">
				  <div class="boxContentHeadr_MM">
				  	<div class="boxContentHeadr_Title">Community</div>
				  </div>
				  <img src="GameDev.net%20--%20Cel-Shading_files/int_gdcirc.gif" class="boxCImgR">
				  <img src="GameDev.net%20--%20Cel-Shading_files/int_gdltcr.gif" class="boxCImgL">			  
				  <div class="boxContent_MM">
			          <a href="http://www.gamedev.net/community/forums/">Forums</a><br>
			          <a href="http://www.gamedev.net/community/gathering/">GD Gathering</a><br>
			          <a href="http://www.gamedev.net/community/chat/">Online Chat</a><br>
				  </div>
				</div>	
				<br class="CMS_Spacer">
				<div id="CMS_Members">
				  <div class="boxContentHeadr_MM">
				  	<div class="boxContentHeadr_Title">Members</div>
				  </div>
				  <img src="GameDev.net%20--%20Cel-Shading_files/int_gdcirc.gif" class="boxCImgR">
				  <img src="GameDev.net%20--%20Cel-Shading_files/int_gdltcr.gif" class="boxCImgL">			  
				  <div class="boxContent_MM">
			          <a href="http://www.gamedev.net/community/forums/cpanel.asp">Control Panel</a><br>
			          <a href="http://www.gamedev.net/subscribe/">GDNet+ Signups!</a><br>
			          <a href="http://www.gamedev.net/community/journals/">Developer Journals</a><br>
			          <a href="http://www.gamedev.net/profile/">Member Search</a><br>
				  </div>
				</div>	
			</div>
			
			<br class="CMS_Spacer">
			<br class="CMS_Spacer">
			<br class="CMS_Spacer">
			
			<div id="FP_Events" class="roundedBox" style="width: 98%;">
					<div class="boxCorners"><img src="GameDev.net%20--%20Cel-Shading_files/int_rtcr.gif" class="boxLeft" height="8" width="7"><img src="GameDev.net%20--%20Cel-Shading_files/int_ltcr.gif" height="8" width="7"></div>
						<div class="boxContentHeadr"><a href="http://www.gamedev.net/directory/events/">Upcoming Events</a></div>
						<div class="boxContent">
<img src="GameDev.net%20--%20Cel-Shading_files/dotsm-blue.gif" height="6" width="7"><a href="http://www.gamedev.net/directory/events/?method=se&amp;eid=149">Penny Arcade Expo</a><br><span class="events_date">8/25 - 8/27 @ Bellevue, WA</span><br><br><img src="GameDev.net%20--%20Cel-Shading_files/dotsm-blue.gif" height="6" width="7"><a href="http://www.gamedev.net/directory/events/?method=se&amp;eid=181">Toronto Independent Games Conference</a><br><span class="events_date">8/31 - 9/2 @ Toronto, Canada</span><br><br><img src="GameDev.net%20--%20Cel-Shading_files/dotsm-blue.gif" height="6" width="7"><a href="http://www.gamedev.net/directory/events/?method=se&amp;eid=183">Game Audio Conference</a><br><span class="events_date">9/6 - 9/7 @ Austin, TX</span><br><br><img src="GameDev.net%20--%20Cel-Shading_files/dotsm-blue.gif" height="6" width="7"><a href="http://www.gamedev.net/directory/events/?method=se&amp;eid=116">Games Market Europe</a><br><span class="events_date">9/6 - 9/7 @ London, United Kingdom</span><br><br><a href="http://www.gamedev.net/directory/events/">More events...</a>
						</div>
			</div>		
			
			<br class="CMS_Spacer">
			<br class="CMS_Spacer">
	
			<div id="FP_Stats" class="roundedBox" style="width: 98%;">
					<div class="boxCorners"><img src="GameDev.net%20--%20Cel-Shading_files/int_rtcr.gif" class="boxLeft" height="8" width="7"><img src="GameDev.net%20--%20Cel-Shading_files/int_ltcr.gif" height="8" width="7"></div>
						<div class="boxContentHeadr">Quick Stats</div>
						<div class="boxContent">

						<span class="stats_bold">3041</span> people currently visiting GDNet.<br>
						<span class="stats_bold">1983</span> articles in the reference section.<br>
						<br>
						<a href="http://www.grid.org/services/teams/team.htm?id=FD181524-CCD8-4DAA-A4EC-499F0DB09AD2">Help us fight cancer!</a><br>
						<a href="http://setiathome.berkeley.edu/team_display.php?teamid=31384">Join SETI Team GDNet!</a>
						</div>

			</div>			

			<br class="CMS_Spacer">
			<br class="CMS_Spacer">
			<br class="CMS_Spacer">

			<!-- MICROBUTTON ADVERT FOR PARTNER SITES -->		
			<div id="FP_PartnerButton" align="center">
<a href="http://www.gamedev.net/"><img src="GameDev.net%20--%20Cel-Shading_files/gdnet-88x31.gif" alt="Link to us" border="0" height="31" width="88"></a><br class="CMS_Spacer"><br class="CMS_Spacer">
<!-- Begin -  Site: GameDev.net Zone: Button Rotation -->
<table border="0" cellpadding="0" cellspacing="0" width="88"><tbody><tr><td><script language="javascript" src="GameDev.net%20--%20Cel-Shading_files/sequence2.js" type="text/javascript"></script><table mm_noconvert="TRUE" border="0" bordercolor="#ffffff" cellpadding="1" cellspacing="1" width="100%"><tbody><tr><td><a href="http://www.gamedev.net/banman/a.aspx?Task=Click&amp;ZoneID=34&amp;CampaignID=285&amp;AdvertiserID=11&amp;BannerID=377&amp;SiteID=1&amp;RandomNumber=94688" target="_Blank"><img src="GameDev.net%20--%20Cel-Shading_files/b_tgc.gif" alt="" align="middle" border="0" height="31" width="88"></a><br><br></td></tr></tbody></table></td></tr></tbody></table>
<!-- End -  Site: GameDev.net Zone: Button Rotation -->
			</div>

			<div id="CMS_ExOptC"></div>
			<div id="CMS_ExOptD"></div>
			
</div>

<div id="centercolumn_2col">
<div class="centerpadding">


<table class="contextNav" align="center" border="0" width="100%">
	<tbody><tr>
		<td valign="bottom" width="90%">
			<div class="hdrbreadcrumbs">
			<strong></strong>
			</div>
		</td>
		<td class="hdrSearchBox" nowrap="nowrap" valign="middle" width="10%">
			<form style="margin: 0pt; padding: 0pt;" action="/community/forums/search.asp">&nbsp;&nbsp;<strong>search:</strong>&nbsp;<input size="20" name="terms" class="searchinput" type="text">&nbsp;&nbsp;<input src="GameDev.net%20--%20Cel-Shading_files/hdr3srchbtn.gif" class="searchbutton" type="image"><span class="mediumfont"><input name="area" value="site" type="hidden">
		</span></form></td>
	</tr>
</tbody></table>



<center><a href="http://www.gamedev.net/reference/programming/features/celshading"><img src="GameDev.net%20--%20Cel-Shading_files/celshading.gif" alt="" border="0" height="94" width="266"></a>

<br><table border="0" cellpadding="4" cellspacing="0" width="100%"><tbody><tr><td>

<!-- ARTICLE MAIN BODY -->
<p><!--=============== NAVIGATION BOX ==================-->
<table align="right" border="0" cellpadding="2" cellspacing="0" width="170"><tbody><tr><td>

<table border="0" cellpadding="4" cellspacing="2" width="100%">
  <tbody><tr><td class="boxheadr" valign="top">
    Contents
  </td></tr>
  <tr>
    <td class="featmenu" valign="middle">
      <img src="GameDev.net%20--%20Cel-Shading_files/dotsm.gif" alt="" border="0" height="6" width="7">&nbsp;<a href="http://www.gamedev.net/reference/programming/features/celshading/default.asp"><font color="#ffffff">Introduction</font></a><br>
      <img src="GameDev.net%20--%20Cel-Shading_files/dotsm.gif" alt="" border="0" height="6" width="7">&nbsp;<a href="http://www.gamedev.net/reference/programming/features/celshading/page2.asp"><font color="#ffffff">Advanced Topics</font></a><br>
      <img src="GameDev.net%20--%20Cel-Shading_files/dotsm.gif" alt="" border="0" height="6" width="7">&nbsp;<a href="http://www.gamedev.net/reference/programming/features/celshading/page3.asp"><font color="#ffffff">Conclusion</font></a><br>
      <hr size="1">
      <img src="GameDev.net%20--%20Cel-Shading_files/dotsm.gif" alt="" border="0" height="6" width="7">&nbsp;<a href="http://www.gamedev.net/reference/articles/article1438.asp"><font color="#ffffff">Printable version</font></a><br>
      <img src="GameDev.net%20--%20Cel-Shading_files/dotsm.gif" alt="" border="0" height="6" width="7">&nbsp;<a href="http://www.gamedev.net/community/forums/topic.asp?key=featart&amp;uid=1438&amp;forum_id=35&amp;Topic_Title=Cel%2DShading"><font color="#ffffff">Discuss this article<br><img src="GameDev.net%20--%20Cel-Shading_files/clear.gif" border="0" height="6" width="7">&nbsp;in the forums</font></a><br>
    </td>
  </tr>
</tbody></table>
<br>
</td></tr></tbody></table>


</p><h1>Introduction</h1>
<p>Cel-Shading is the "art" of rendering your objects to look like
cartoons. Various cartoon effects can be achieved with very little
modifications to the original source code. You can have anime effects,
as seen in DragonballZ or Gundam, or "classic" cartoons such as Loony
Toons. Cel-Shading is a very powerful form of rendering, and it's
results can completely change the "feel" of a game. For instance, the
cartoon-like graphics of <i>Jet Set</i> and <i>Grind Radio</i> on the
Dreamcast add to the atmosphere and help create one hell of a funky
game. However, don't expect this form of rendering to make your game
amazing overnight - just play <i>Loony Toons Space Race</i> and you'll see that sometimes it doesn't really help at all.

</p><h1>The Basics</h1>
<p>As this is an advanced topic, before going any further make sure you have adequate knowledge in the following areas:
</p><ul>
  <li>1D texture mapping.
  </li><li>Texture co-ordinates.
  </li><li>Software lighting.
  </li><li>Vector math.
</li></ul>
<p>If you don't, then you will still be able to understand the article,
but, since I'm not providing any source code with this article, you may
be stuck when the time comes to code a cel shading demo. At the end of
each section I will give a brief run-down of how to create the desired
effects.
</p><h2>Basic Rendering</h2>
<p>We're going to start from the very beginning here. No lights, no
outlines, just flat cartoon models. For this, you only need to store
two chunks of data - the position and color of each vertex. For basic
rendering, we draw after disabling ALL lighting and blending. That's
simple enough.
</p><p>So what's happening here? If we enabled lighting, our objects
would look normal, and we wouldn't get the flat cartoon effect we are
trying to achieve. We also disable blending to make sure that the
vertices don't "bleed" into each other.
</p><h3>Summary</h3>
<ol>
  <li>Disable lighting.
  </li><li>Disable blending.
  </li><li>Draw the colored vertexes.
</li></ol>

<h2>Basic Lighting (Directional)</h2>
<p>This is where your knowledge of the topics listed in Section 1 come
in use. Each vertex needs to store a little extra data - the vertex
normal and a lighting value (a single floating point variable). This
normal and lighting value are then used to render the object with basic
lighting.
</p><h3>Lighting Maps</h3>
<p>Just so I don't confuse you, I don't mean lighting maps such as those used to simulate lighting on objects, ala <i>Quake 1</i> and <i>Quake 2</i>
(look at the wall-lights to see what I mean). Nor do I mean light/dark
maps that highlight/darken specific areas of the maps. What we have
here is a completely new form of light map. And guess what? It's a 1D
texture.
</p><p>Go find some anime (Cartoon Network is always a good resource)
and look at the lighting on the characters. Notice how it isn't smooth
like in real life? The lighting is split into distinctive blocks or
bands, the process of this is called quantizing, and the result of this
is quantizied colors (thanks to Sulphur Dragon for that one).
</p><p><img src="GameDev.net%20--%20Cel-Shading_files/texmap.gif">
</p><p>This is a 1x16 pixel greyscale texture map (very zoomed in). The
black boxes are there to show you the individual pixels. We use
greyscale values because they will be combined with the color of the
vertex at a later stage. You may have noticed that there are only 3
colors in the map that are simiar to the intensities used in anime
movies. The reason we make the texture map 16 pixels wide is so we can
modify the values at ease to create different effects, different
numbers of colors, etc. You could simply have black and white in there
if you wanted, but it is not suggested. You should never put 100% black
in the texture, because it makes highlights and outlines look horrible
when we add them.
</p><p>Once you have made your desired texture, load it into whatever
API you're using (DX, OGL, software) and leave it alone for now. We'll
come back to it in a moment.
</p><h3>Calculating the Lighting</h3>
<p>Now your software lighting knowledge is important. However, don't
worry if you have not researched software lighting yet, as I will
explain it in basic English. Directional lighting is easy. Just make
sure you normalize the lighting direction vector!
</p><p>All we have to do is calculate the dot product between the
lighting vector and the normal of the vertex. Why? Well, here's a bit
of theory.
</p><p>The dot product function calculates the angle between 2 vectors
and returns it as a value with a maximum of 1. The value returned is
actually the cosine of the angle. All you have to do is use the inverse
cosine on the value and you will get the angle. However, instead of a
costly cosine function, think about the value of a texture coordinate.
Texture coordinates are stored as a value between 0 and 1 ([0 &lt;= x
&lt;= 1]). It turns out that the dot product (set the value to zero if
negative) of the normal and the lighting direction vector actually
gives us our texture coordinate!
</p><h3>Rendering the Object</h3>
<p>Now you have the texture coordinate for each vertex, and it's time
to draw the object. Again, disable lighting and blending, but enable
texturing (remember it's a 1D texture). Draw the object the same as
before, but this time specify the texture coordinate before the
position of the vertex. Voila! One lit, cel-shaded object.
</p><h3>Summary</h3>
<p>For all those people who couldn't care less for theory, here's what you need to do.
</p><ol>
  <li>Create a Sharp Lighting map.
  </li><li>Calculate and store the dot product between the normal and the lighting direction.
  </li><li>Disable lighting and blending.
  </li><li>Enable texturing.
  </li><li>Set the current texture to the light map.
  </li><li>Draw the polygons, specifying only the texture coordinate, color, and vertex positions.
</li></ol>

<h2>Positional Lights</h2>
<p>This method merely requires a little modification of the method described above.
</p><p>Positional lights offer more flexibility than directional lights
for the simple fact that they can be moved around the scene,
dynamically lighting all polygons realistically. Although it looks
good, the math required is much longer than for directional lighting.
It's not more complicated, just longer :-).
</p><h3>Calculating the Sharp Lighting Coordinate</h3>
<p>With directional lighting, we simply needed to get the dot product
of the light direction and the vertex normal. Now, because positional
lighting has no direction (it emmits light in all directions), each
vertex will have it's own "ray of light" shining towards it. That's not
too bad, until you realise that we're doing this in software.
</p><p>First of all, we have to create a vector from the position of
the light to the position of the vertex. We then normalize this so it
has a unit length (magnitude) of 1. This gives us the direction of the
light to that particular vertex. Now, we take the dot product of this
vector with the normal of the vertex, and repeat the calculation for
every vertex in the scene. Argh! That is gonna slow the frame rate down
a lot, so let's look at a quick method of reducing the number of lit
vertices.
</p><h3>Radius Checking with Positional Lighting</h3>
<p>To reduce the number of lit vertices, we first give each light its
own radius. Before calculating the lighting values, we see if the
vertex is actually within the light's radius (simple point-in-sphere)
test. If so, we apply the lighting to it. If not, then we don't. This
is basically a point-in-sphere collision detection test, which there
are plenty of articles and tutorials out there on (not to mention the
message board here at GameDev.net).
</p><h3>Rendering</h3>
<p>As with directional lighting, we draw the object but only specify the color, texture coordinate, and position.

</p><h3>Summary</h3>
<ol>
  <li>Create the Sharp Lighting map.
  </li><li>If using a light radius, do a point-in-sphere check to see if the point is within range.
  </li><li>Get the vector from the light position to the vertex and normalize it.
  </li><li>Get the dot product of the new vector and the vertex normal.
  </li><li>Repeat 2-4 for every vertex.
  </li><li>Render as usual.
</li></ol>

<h2>Outlines and Highlighting</h2>
<p>Outlines and Hightlights are the little black lines representing the
pencil strokes of the rendered cartoon. It may seem daunting, but it's
actually easier than you think.
</p><h3>Calculating Where to Highlight</h3>
<p>I'm going to refer to outlining and highlighting simply as
"highlighting", since they both use exactly the same technique (and are
both calculated at the same time). The rule is simple: draw a line
along any edge that has one front facing polygon and one back facing
polygon. This might sound daft, but look at your keyboard for a second.
Note how you can't see the back of the keys? This is because they are
facing away, so we would draw a line along that edge to show that there
is an edge there.
</p><p>Notice how I didn't mention anything about polygon culling in the introduction? This is because we get the API to do it for us.

</p><h3>Rendering Highlights</h3>
<p>First, we set the line width - 2 or 3 pixels wide normally gives a
nice effect. You can also turn on anti-aliasing for this. We change the
culling mode to front facing (i.e. remove all front facing polygons).
Next, we switch to wireframe mode so we only draw lines. Now, we draw
the polygons as usual, except we don't need to specify the color or
texture coordinate. What this will do is draw a wireframe mesh of all
backfacing polygons, however, due to the magical power of the depth
buffer, only lines that are in front of forward facing polygons are
drawn (note that this method wouldn't work if we set the line width to
1).
</p><h3>Summary</h3>
<p>Okay, here we go:
</p><ol>
  <li>Draw the object as normal.
  </li><li>Switch face orientation.
  </li><li>Set the color to 100% black.
  </li><li>Change to wireframe mode.
  </li><li>Draw the mesh again, but only specifying the vertex positions.
  </li><li>Restore the original modes.
</li></ol>

<p>We're moving along nicely. Let's look at some advanced topics.

<br><br><br>

<!--=============== NEXT PAGE LINK ==================-->
</p><p align="right"><b><a href="http://www.gamedev.net/reference/programming/features/celshading/page2.asp"><img src="GameDev.net%20--%20Cel-Shading_files/pointernext.gif" alt="" align="right" border="0" height="35" width="62">
<br>Next : <u>Advanced Topics</u></a></b></p>

</td></tr></tbody></table></center>


</div>
</div>


<div id="footer" class="footer">
<br><br>
	<a href="http://www.gamedev.net/info/about">About Us</a> | <a href="http://www.gamedev.net/info/media/">Advertise on GameDev.net</a> | <a href="http://www.gamedev.net/info/writers.asp">Write for us</a><br>
	© 1999-2006 Gamedev.net. All rights reserved. <a href="http://www.gamedev.net/info/legal.asp#copyright"><u>Terms of Use</u></a> <a href="http://www.gamedev.net/info/legal.asp#privacy"><u>Privacy Policy</u></a>
	<br><span class="maintext-1">Comments? Questions? Feedback? <a href="http://www.gamedev.net/info/faq.asp">Click here!</a>&nbsp;&nbsp;&nbsp;&nbsp;GameDev.net is Powered By <a href="http://www.nieropwebconsult.nl/asp_session_manager.htm">ISP Session</a></span>
	<br><span class="maintext-2">GameDev.net&#8482;, the GameDev.net logo, and GDNet&#8482; are trademarks of GameDev.net, LLC</span><br><p></p>
</div>

<!-- start Vibrant Media IntelliTXT Tooltip style sheet -->

<!-- end Vibrant Media IntelliTXT style sheet -->
<!-- start Vibrant Media IntelliTXT script section -->
<script type="text/javascript" src="GameDev.net%20--%20Cel-Shading_files/front.js"></script><script language="javascript" src="GameDev.net%20--%20Cel-Shading_files/door.js"></script>
<!-- end Vibrant Media IntelliTXT script section -->

<script src="GameDev.net%20--%20Cel-Shading_files/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-279474-1";
urchinTracker();
</script>
<script type="text/javascript" src="GameDev.net%20--%20Cel-Shading_files/func_033.js"></script><script type="text/javascript" src="GameDev.net%20--%20Cel-Shading_files/al.htm"></script></body></html>